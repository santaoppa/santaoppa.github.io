![image](https://github.com/user-attachments/assets/9b745e01-482d-41b2-949d-80dfe6c62219)---
title: "[React] useReducerë€?"
excerpt: "ì—¬ëŸ¬ ê°œì˜ stateë¥¼ í•˜ë‚˜ì˜ reducerë¡œ í†µí•©í•´ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” Hook"

categories:
  - React
tags:
  - [React]

toc: true
toc_sticky: true

date: 2025-04-28
last_modified_at: 2025-04-28
---

## useReducerë€?
ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—¬ëŸ¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ í•˜ë‚˜ì˜ stateë¥¼ ì—…ë°ì´íŠ¸í•  ê²½ìš°, ê´€ë¦¬ê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.

**useReducer**ëŠ” `useState`ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” Hookìœ¼ë¡œ, ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ **ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ë‹¨ì¼ í•¨ìˆ˜(reducer)**ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.  
ì´ë¥¼ í†µí•´ ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ëª…í™•í•˜ê²Œ ì •ë¦¬í•˜ê³ , ë³µì¡í•œ state ê´€ë¦¬ë¥¼ ê¹”ë”í•˜ê²Œ í†µí•©í•  ìˆ˜ ìˆë‹¤.
<br/>

## useReducer êµ¬ì„± ìš”ì†Œ
- **useReducer í•¨ìˆ˜** : `reducer` í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” ê°’ìœ¼ë¡œ stateë¥¼ ê°±ì‹ í•œë‹¤.
- **action** : `dispatch`ì˜ ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” ê°ì²´ë¡œ, **state ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ì •ë³´**ë¥¼ ë‹´ê³  ìˆë‹¤.
- **dispatch í•¨ìˆ˜** : `reducer`ë¥¼ ì‹¤í–‰ì‹œì¼œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- **reducer í•¨ìˆ˜** : ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ **state ì—…ë°ì´íŠ¸ ë¡œì§**ì„ ë‹´ë‹¹í•œë‹¤.
<br/>

## ğŸš« reducer ì ìš© ì „
```js
const [tasks, setTasks] = useState(initialTasks);

function handleAddTask(text) {
  setTasks([...tasks, {
    id: nextId++,
    text: text,
    done: false
  }]);
}

function handleChangeTask(task) {
  setTasks(tasks.map(t => {
    if (t.id === task.id) {
      return task;
    } else {
      return t;
    }
  }));
}

function handleDeleteTask(taskId) {
  setTasks(
    tasks.filter(t => t.id !== taskId)
  );
}
```
   
## âœ… reducer ì ìš© í›„
### 1ï¸âƒ£ reducer í•¨ìˆ˜ ì‘ì„±í•˜ê¸°
í˜„ì¬ì˜ state ê°’ê³¼ action ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ê³  state ê°’ì„ ë°˜í™˜í•¨
```js
function tasksReducer(tasks, action) {
  switch (action.type) {
    case 'added': {
      return [...tasks, {
        id: action.id,
        text: action.text,
        done: false
      }];
    }
    case 'changed': {
      return tasks.map(t => {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case 'deleted': {
      return tasks.filter(t => t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}
```

> âš ï¸ reducerëŠ” ë Œë”ë§ ì¤‘ì— ì‹¤í–‰ë˜ë¯€ë¡œ, ì…ë ¥ì´ ê°™ìœ¼ë©´ í•­ìƒ ê°™ì€ ì¶œë ¥ì„ ë³´ì¥í•´ì•¼ í•œë‹¤.
(ê¸°ì¡´ ê°ì²´ì™€ ë°°ì—´ì„ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³ , ìƒˆë¡­ê²Œ ë³µì‚¬í•˜ì—¬ ì—…ë°ì´íŠ¸í•´ì•¼ í•¨)
<br/>

### 2ï¸âƒ£ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ dispatch ì‚¬ìš©í•˜ê¸°
setTasks ëŒ€ì‹  dispatchë¡œ actionì„ ë³´ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
```js
function handleAddTask(text) {
  dispatch({
    type: 'added',
    id: nextId++,
    text: text,
  });
}

function handleChangeTask(task) {
  dispatch({
    type: 'changed',
    task: task
  });
}

function handleDeleteTask(taskId) {
  dispatch({
    type: 'deleted',
    id: taskId
  });
}
```
<br/>

### 3ï¸âƒ£ ì»¨í¬ë„ŒíŠ¸ì—ì„œ useReducer ì‚¬ìš©í•˜ê¸°
```js
import { useReducer } from 'react';

const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);
```
<br/>

## Immerë¡œ reducer ì‘ì„±í•˜ê¸°
immerë¥¼ í™œìš©í•˜ë©´ ë¶ˆë³€ì„±ì„ ì§ì ‘ ì‹ ê²½ ì“°ì§€ ì•Šê³  reducerë¥¼ ë” ê°„ë‹¨íˆ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
```js
import {useImmerReducer} from 'use-immer';
```

```js
const [tasks, dispatch] = useImmerReducer(tasksReducer, initialTasks);
```
<br/>

### â¡ï¸ useImmerReducerë¡œ ì‘ì„±í•œ ì˜ˆì‹œ
```js
function tasksReducer(draft, action) {
  switch (action.type) {
    case 'added': {
      draft.push( { id: action.id, text: .text, done: false})
      break;
    }
    case 'changed': {
      const target = draft.find(item => item.id === action.task.id);
      target.task = action.task;
      break;
    }
    case 'deleted': {
      return draft.filter(t => t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}
```
